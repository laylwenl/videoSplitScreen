"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),y={1:{type:"1",label:"1分屏",count:1,cols:1,rows:1},2:{type:"2",label:"2分屏",count:2,cols:2,rows:1},3:{type:"3",label:"3分屏",count:3,cols:2,rows:2},4:{type:"4",label:"4分屏",count:4,cols:2,rows:2},6:{type:"6",label:"6分屏",count:6,cols:3,rows:2},7:{type:"7",label:"7分屏",count:7,cols:4,rows:4},8:{type:"8",label:"8分屏",count:8,cols:4,rows:4},9:{type:"9",label:"9分屏",count:9,cols:3,rows:3},10:{type:"10",label:"10分屏",count:10,cols:6,rows:4},13:{type:"13",label:"13分屏",count:13,cols:4,rows:4},16:{type:"16",label:"16分屏",count:16,cols:4,rows:4}},I={};function G(i){if(I[i])return I[i];const o={1:[{col:1,colSpan:1,row:1,rowSpan:1}],2:[{col:1,colSpan:1,row:1,rowSpan:1},{col:2,colSpan:1,row:1,rowSpan:1}],3:[{col:1,colSpan:1,row:1,rowSpan:2,isMain:!0},{col:2,colSpan:1,row:1,rowSpan:1},{col:2,colSpan:1,row:2,rowSpan:1}],4:[{col:1,colSpan:1,row:1,rowSpan:1},{col:2,colSpan:1,row:1,rowSpan:1},{col:1,colSpan:1,row:2,rowSpan:1},{col:2,colSpan:1,row:2,rowSpan:1}],6:[{col:1,colSpan:1,row:1,rowSpan:1},{col:2,colSpan:1,row:1,rowSpan:1},{col:3,colSpan:1,row:1,rowSpan:1},{col:1,colSpan:1,row:2,rowSpan:1},{col:2,colSpan:1,row:2,rowSpan:1},{col:3,colSpan:1,row:2,rowSpan:1}],7:[{col:1,colSpan:2,row:1,rowSpan:2},{col:3,colSpan:2,row:1,rowSpan:2},{col:1,colSpan:2,row:3,rowSpan:2},{col:3,colSpan:1,row:3,rowSpan:1},{col:4,colSpan:1,row:3,rowSpan:1},{col:3,colSpan:1,row:4,rowSpan:1},{col:4,colSpan:1,row:4,rowSpan:1}],8:[{col:1,colSpan:3,row:1,rowSpan:3,isMain:!0},{col:4,colSpan:1,row:1,rowSpan:1},{col:4,colSpan:1,row:2,rowSpan:1},{col:4,colSpan:1,row:3,rowSpan:1},{col:1,colSpan:1,row:4,rowSpan:1},{col:2,colSpan:1,row:4,rowSpan:1},{col:3,colSpan:1,row:4,rowSpan:1},{col:4,colSpan:1,row:4,rowSpan:1}],9:[{col:1,colSpan:1,row:1,rowSpan:1},{col:2,colSpan:1,row:1,rowSpan:1},{col:3,colSpan:1,row:1,rowSpan:1},{col:1,colSpan:1,row:2,rowSpan:1},{col:2,colSpan:1,row:2,rowSpan:1},{col:3,colSpan:1,row:2,rowSpan:1},{col:1,colSpan:1,row:3,rowSpan:1},{col:2,colSpan:1,row:3,rowSpan:1},{col:3,colSpan:1,row:3,rowSpan:1}],10:[{col:1,colSpan:5,row:1,rowSpan:3,isMain:!0},{col:6,colSpan:1,row:1,rowSpan:1},{col:6,colSpan:1,row:2,rowSpan:1},{col:6,colSpan:1,row:3,rowSpan:1},{col:1,colSpan:1,row:4,rowSpan:1},{col:2,colSpan:1,row:4,rowSpan:1},{col:3,colSpan:1,row:4,rowSpan:1},{col:4,colSpan:1,row:4,rowSpan:1},{col:5,colSpan:1,row:4,rowSpan:1},{col:6,colSpan:1,row:4,rowSpan:1}],13:[{col:1,colSpan:2,row:1,rowSpan:2,isMain:!0},{col:3,colSpan:1,row:1,rowSpan:1},{col:4,colSpan:1,row:1,rowSpan:1},{col:3,colSpan:1,row:2,rowSpan:1},{col:4,colSpan:1,row:2,rowSpan:1},{col:1,colSpan:1,row:3,rowSpan:1},{col:2,colSpan:1,row:3,rowSpan:1},{col:3,colSpan:1,row:3,rowSpan:1},{col:4,colSpan:1,row:3,rowSpan:1},{col:1,colSpan:1,row:4,rowSpan:1},{col:2,colSpan:1,row:4,rowSpan:1},{col:3,colSpan:1,row:4,rowSpan:1},{col:4,colSpan:1,row:4,rowSpan:1}],16:[{col:1,colSpan:1,row:1,rowSpan:1},{col:2,colSpan:1,row:1,rowSpan:1},{col:3,colSpan:1,row:1,rowSpan:1},{col:4,colSpan:1,row:1,rowSpan:1},{col:1,colSpan:1,row:2,rowSpan:1},{col:2,colSpan:1,row:2,rowSpan:1},{col:3,colSpan:1,row:2,rowSpan:1},{col:4,colSpan:1,row:2,rowSpan:1},{col:1,colSpan:1,row:3,rowSpan:1},{col:2,colSpan:1,row:3,rowSpan:1},{col:3,colSpan:1,row:3,rowSpan:1},{col:4,colSpan:1,row:3,rowSpan:1},{col:1,colSpan:1,row:4,rowSpan:1},{col:2,colSpan:1,row:4,rowSpan:1},{col:3,colSpan:1,row:4,rowSpan:1},{col:4,colSpan:1,row:4,rowSpan:1}]}[i]||[];return o.length>0&&(I[i]=o),o}function M(){return Object.keys(y)}const K={class:"layout-icon"},Z={key:0,viewBox:"0 0 48 48",fill:"none"},ee={key:1,viewBox:"0 0 48 48",fill:"none"},te={key:2,viewBox:"0 0 48 48",fill:"none"},oe={key:3,viewBox:"0 0 48 48",fill:"none"},re={key:4,viewBox:"0 0 48 48",fill:"none"},ae={key:5,viewBox:"0 0 48 48",fill:"none"},le={key:6,viewBox:"0 0 48 48",fill:"none"},ne={key:7,viewBox:"0 0 48 48",fill:"none"},ce={key:8,viewBox:"0 0 54 48",fill:"none"},ie={key:9,viewBox:"0 0 48 48",fill:"none"},de={key:10,viewBox:"0 0 48 48",fill:"none"},se=e.defineComponent({__name:"VideoLayoutIcon",props:{type:{}},setup(i){return(v,o)=>(e.openBlock(),e.createElementBlock("div",K,[i.type==="1"?(e.openBlock(),e.createElementBlock("svg",Z,[...o[0]||(o[0]=[e.createElementVNode("rect",{x:"4",y:"4",width:"40",height:"40",stroke:"currentColor","stroke-width":"2"},null,-1)])])):i.type==="2"?(e.openBlock(),e.createElementBlock("svg",ee,[...o[1]||(o[1]=[e.createElementVNode("rect",{x:"4",y:"4",width:"19",height:"40",stroke:"currentColor","stroke-width":"1.5"},null,-1),e.createElementVNode("rect",{x:"25",y:"4",width:"19",height:"40",stroke:"currentColor","stroke-width":"1.5"},null,-1)])])):i.type==="3"?(e.openBlock(),e.createElementBlock("svg",te,[...o[2]||(o[2]=[e.createElementVNode("rect",{x:"4",y:"4",width:"20",height:"40",stroke:"currentColor","stroke-width":"2"},null,-1),e.createElementVNode("rect",{x:"26",y:"4",width:"18",height:"19",stroke:"currentColor","stroke-width":"1.5"},null,-1),e.createElementVNode("rect",{x:"26",y:"25",width:"18",height:"19",stroke:"currentColor","stroke-width":"1.5"},null,-1)])])):i.type==="4"?(e.openBlock(),e.createElementBlock("svg",oe,[...o[3]||(o[3]=[e.createElementVNode("rect",{x:"4",y:"4",width:"19",height:"19",stroke:"currentColor","stroke-width":"1.5"},null,-1),e.createElementVNode("rect",{x:"25",y:"4",width:"19",height:"19",stroke:"currentColor","stroke-width":"1.5"},null,-1),e.createElementVNode("rect",{x:"4",y:"25",width:"19",height:"19",stroke:"currentColor","stroke-width":"1.5"},null,-1),e.createElementVNode("rect",{x:"25",y:"25",width:"19",height:"19",stroke:"currentColor","stroke-width":"1.5"},null,-1)])])):i.type==="6"?(e.openBlock(),e.createElementBlock("svg",re,[...o[4]||(o[4]=[e.createStaticVNode('<rect x="3" y="4" width="13" height="18" stroke="currentColor" stroke-width="1.5" data-v-31e0404d></rect><rect x="18" y="4" width="12" height="18" stroke="currentColor" stroke-width="1.5" data-v-31e0404d></rect><rect x="32" y="4" width="13" height="18" stroke="currentColor" stroke-width="1.5" data-v-31e0404d></rect><rect x="3" y="24" width="13" height="18" stroke="currentColor" stroke-width="1.5" data-v-31e0404d></rect><rect x="18" y="24" width="12" height="18" stroke="currentColor" stroke-width="1.5" data-v-31e0404d></rect><rect x="32" y="24" width="13" height="18" stroke="currentColor" stroke-width="1.5" data-v-31e0404d></rect>',6)])])):i.type==="7"?(e.openBlock(),e.createElementBlock("svg",ae,[...o[5]||(o[5]=[e.createStaticVNode('<rect x="4" y="4" width="19" height="19" stroke="currentColor" stroke-width="2" data-v-31e0404d></rect><rect x="25" y="4" width="19" height="19" stroke="currentColor" stroke-width="2" data-v-31e0404d></rect><rect x="4" y="25" width="19" height="19" stroke="currentColor" stroke-width="2" data-v-31e0404d></rect><rect x="25" y="25" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="35" y="25" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="25" y="35" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="35" y="35" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect>',7)])])):i.type==="8"?(e.openBlock(),e.createElementBlock("svg",le,[...o[6]||(o[6]=[e.createStaticVNode('<rect x="4" y="4" width="28" height="29" stroke="currentColor" stroke-width="2" data-v-31e0404d></rect><rect x="34" y="4" width="10" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="34" y="14.5" width="10" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="34" y="24.5" width="10" height="8.5" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="4" y="35" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="14" y="35" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="24" y="35" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="34" y="35" width="10" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect>',8)])])):i.type==="9"?(e.openBlock(),e.createElementBlock("svg",ne,[...o[7]||(o[7]=[e.createStaticVNode('<rect x="4" y="4" width="12" height="12" stroke="currentColor" stroke-width="1.5" data-v-31e0404d></rect><rect x="18" y="4" width="12" height="12" stroke="currentColor" stroke-width="1.5" data-v-31e0404d></rect><rect x="32" y="4" width="12" height="12" stroke="currentColor" stroke-width="1.5" data-v-31e0404d></rect><rect x="4" y="18" width="12" height="12" stroke="currentColor" stroke-width="1.5" data-v-31e0404d></rect><rect x="18" y="18" width="12" height="12" stroke="currentColor" stroke-width="1.5" data-v-31e0404d></rect><rect x="32" y="18" width="12" height="12" stroke="currentColor" stroke-width="1.5" data-v-31e0404d></rect><rect x="4" y="32" width="12" height="12" stroke="currentColor" stroke-width="1.5" data-v-31e0404d></rect><rect x="18" y="32" width="12" height="12" stroke="currentColor" stroke-width="1.5" data-v-31e0404d></rect><rect x="32" y="32" width="12" height="12" stroke="currentColor" stroke-width="1.5" data-v-31e0404d></rect>',9)])])):i.type==="10"?(e.openBlock(),e.createElementBlock("svg",ce,[...o[8]||(o[8]=[e.createStaticVNode('<rect x="3" y="4" width="36" height="29" stroke="currentColor" stroke-width="2" data-v-31e0404d></rect><rect x="41" y="4" width="10" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="41" y="14.5" width="10" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="41" y="24.5" width="10" height="8.5" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="3" y="35" width="7" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="11" y="35" width="7" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="19" y="35" width="7" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="27" y="35" width="7" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="35" y="35" width="6" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="42" y="35" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect>',10)])])):i.type==="13"?(e.openBlock(),e.createElementBlock("svg",ie,[...o[9]||(o[9]=[e.createStaticVNode('<rect x="4" y="4" width="18" height="18" stroke="currentColor" stroke-width="2" data-v-31e0404d></rect><rect x="24" y="4" width="8" height="8" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="34" y="4" width="10" height="8" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="24" y="14" width="8" height="8" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="34" y="14" width="10" height="8" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="4" y="24" width="8" height="8" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="14" y="24" width="8" height="8" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="24" y="24" width="8" height="8" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="34" y="24" width="10" height="8" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="4" y="34" width="8" height="10" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="14" y="34" width="8" height="10" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="24" y="34" width="8" height="10" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="34" y="34" width="10" height="10" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect>',13)])])):i.type==="16"?(e.openBlock(),e.createElementBlock("svg",de,[...o[10]||(o[10]=[e.createStaticVNode('<rect x="4" y="4" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="15" y="4" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="26" y="4" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="37" y="4" width="7" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="4" y="15" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="15" y="15" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="26" y="15" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="37" y="15" width="7" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="4" y="26" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="15" y="26" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="26" y="26" width="9" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="37" y="26" width="7" height="9" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="4" y="37" width="9" height="7" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="15" y="37" width="9" height="7" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="26" y="37" width="9" height="7" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect><rect x="37" y="37" width="7" height="7" stroke="currentColor" stroke-width="1.2" data-v-31e0404d></rect>',16)])])):e.createCommentVNode("",!0)]))}}),O=(i,v)=>{const o=i.__vccOpts||i;for(const[g,w]of v)o[g]=w;return o},$=O(se,[["__scopeId","data-v-31e0404d"]]),he={key:0,class:"layout-toolbar",role:"toolbar","aria-label":"布局切换工具栏"},we={class:"layout-buttons"},ue=["onClick","title","aria-label","aria-pressed"],pe={class:"layout-label"},ve={class:"video-grid-container",role:"region","aria-label":"视频网格"},ye=["aria-label","onDragstart","onDragenter","onDragleave","onDrop"],ke={class:"video-placeholder"},ge={class:"placeholder-number"},Se=.5,me="grabbing",fe="0.8",Ce=e.defineComponent({__name:"VideoGridLayout",props:{videos:{},layout:{default:"1"},availableLayouts:{},showToolbar:{type:Boolean,default:!0},width:{},height:{},placeholderText:{},placeholders:{}},emits:["layoutChange","videosChange"],setup(i,{emit:v}){const o=i,g=v,w=e.ref(o.layout);e.watch(()=>o.layout,t=>{w.value=t});const P=e.computed(()=>o.availableLayouts&&o.availableLayouts.length>0?o.availableLayouts:M()),p=e.shallowRef([]);function E(t){const r=Array.isArray(t)?t:o.videos||[],l=V.value,a={};p.value.forEach((s,h)=>{s&&s.id!==void 0&&(a[s.id]=s.__labelNumber??h+1)});const c=Array.from({length:l}).map((s,h)=>{const n=r[h];if(n){const k=a[n.id]??n.__labelNumber??h+1;return{...n,__labelNumber:k}}});p.value=c}e.watch(()=>o.videos,t=>{if(!Array.isArray(t)){console.warn("[VideoGridLayout] Invalid videos prop, expected array");return}E(t)},{flush:"post"});let A=!1;e.watch(p,t=>{!A&&Array.isArray(t)&&g("videosChange",t)});const _=e.computed(()=>{const t=y[w.value];return t||(console.warn(`[VideoGridLayout] Invalid layout type: ${w.value}, fallback to '4'`),y[4])}),S=e.computed(()=>G(w.value)),V=e.computed(()=>{var t;return((t=_.value)==null?void 0:t.count)||4}),x=e.computed(()=>p.value.slice(0,V.value).map(t=>t).filter(Boolean));E(o.videos),e.watch(V,()=>{E(o.videos)});const T=e.computed(()=>{const t=S.value.map((r,l)=>({p:r,idx:l}));return t.sort((r,l)=>r.p.row===l.p.row?(r.p.col||0)-(l.p.col||0):(r.p.row||0)-(l.p.row||0)),t.map(r=>r.idx)}),u=e.ref(-1),m=e.ref(-1),b=e.shallowRef(null),d=e.shallowRef(null);let f=null,C=null;const z=e.computed(()=>{const t=_.value;return{display:"grid",gridTemplateColumns:(t==null?void 0:t.colTemplate)||`repeat(${(t==null?void 0:t.cols)||2}, 1fr)`,gridTemplateRows:(t==null?void 0:t.rowTemplate)||`repeat(${(t==null?void 0:t.rows)||2}, 1fr)`,gap:"4px",width:o.width||"100%",height:o.height||"100%"}}),F=e.computed(()=>({width:o.width||"100%",height:o.height||"100%"}));function Y(t){const r=t,l=T.value[r];if(Array.isArray(o.placeholders)&&o.placeholders[l]!==void 0)return String(o.placeholders[l]);if(typeof o.placeholderText=="function")try{return o.placeholderText(r)}catch{return String(r+1)}return o.placeholderText?String(o.placeholderText):String(r+1)}function H(t){const r=S.value[t];return!r||typeof r.col!="number"||typeof r.row!="number"?{}:{gridColumn:`${r.col} / span ${r.colSpan}`,gridRow:`${r.row} / span ${r.rowSpan}`}}function U(t){const r=S.value[t];return(r==null?void 0:r.isMain)||!1}function j(t){w.value=t,g("layoutChange",w.value)}function B(){if(b.value&&document.body.contains(b.value)){try{document.body.removeChild(b.value)}catch(t){console.warn("[VideoGridLayout] Failed to cleanup drag image:",t)}b.value=null}if(d.value&&document.body.contains(d.value)){try{document.body.removeChild(d.value)}catch{}d.value=null}f&&(document.removeEventListener("mousemove",f),f=null),C&&(document.removeEventListener("drag",C),C=null)}function q(t,r){if(r<0||r>=p.value.length){console.warn("[VideoGridLayout] Invalid drag index:",r);return}if(u.value=r,!t.dataTransfer)return;t.dataTransfer.effectAllowed="move";const a=t.target.closest(".video-item");if(a)try{if(B(),t.dataTransfer){t.dataTransfer.effectAllowed="move";const n=new Image;n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",t.dataTransfer.setDragImage(n,0,0)}const c=a.cloneNode(!0);c.querySelectorAll(".progress-bar, .play-button").forEach(n=>n.remove()),c.querySelectorAll('[style*="transition"], [style*="animation"], .video-icon').forEach(n=>{try{n.style.transition="none",n.style.animation="none"}catch{}}),c.style.position="fixed",c.style.margin="0",c.style.pointerEvents="none",c.style.opacity=fe,c.style.zIndex="9999",document.body.appendChild(c),d.value=c;try{const n=a.getBoundingClientRect();c.style.width=`${n.width}px`,c.style.height=`${n.height}px`}catch{}f=n=>{if(!d.value)return;const k=d.value.offsetWidth||0,L=d.value.offsetHeight||0,N=Math.max(0,n.clientX-k/2),D=Math.max(0,n.clientY-L/2);d.value.style.left=`${N}px`,d.value.style.top=`${D}px`},document.addEventListener("mousemove",f),C=n=>{if(!d.value)return;const k=d.value.offsetWidth||0,L=d.value.offsetHeight||0,N=Math.max(0,(n.clientX||0)-k/2),D=Math.max(0,(n.clientY||0)-L/2);d.value.style.left=`${N}px`,d.value.style.top=`${D}px`},document.addEventListener("drag",C),a.style.opacity=String(Se),a.style.cursor=me,a.style.borderColor="#ff6b6b"}catch(c){console.error("[VideoGridLayout] Drag start error:",c),B()}}function W(t,r){t.preventDefault(),t.stopPropagation();const l=u.value;if(l===-1||l===r){u.value=-1;return}if(r<0||r>=S.value.length){console.warn("[VideoGridLayout] Invalid drop index:",r),u.value=-1;return}try{const a=t.currentTarget;a&&(a.style.backgroundColor="rgba(66, 184, 131, 0.3)",a.style.borderColor="#42b883",setTimeout(()=>{a.style.backgroundColor="",a.style.borderColor=""},200));const c=[...p.value],s=c[l],h=c[r];c[l]=h,c[r]=s,A=!0,p.value=c,setTimeout(()=>{A=!1,g("videosChange",p.value.filter(Boolean))},0)}catch(a){console.error("[VideoGridLayout] Drop error:",a)}finally{u.value=-1}}function X(t,r){t.preventDefault(),u.value!==-1&&u.value!==r&&(m.value=r)}function Q(t,r){t.preventDefault();const l=t.target,a=t.relatedTarget;l.contains(a)||m.value===r&&(m.value=-1)}function J(t){const l=t.target.closest(".video-item");l&&(l.style.opacity="1",l.style.cursor="move",l.style.borderColor=""),B(),u.value=-1,m.value=-1}return e.onBeforeUnmount(()=>{B()}),(t,r)=>(e.openBlock(),e.createElementBlock("div",{class:"video-grid-layout",role:"application","aria-label":"视频分屏布局",style:e.normalizeStyle(F.value)},[i.showToolbar?(e.openBlock(),e.createElementBlock("div",he,[r[1]||(r[1]=e.createElementVNode("div",{class:"toolbar-title"},"分屏布局",-1)),e.createElementVNode("div",we,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(P.value,l=>{var a,c,s;return e.openBlock(),e.createElementBlock("button",{key:l,class:e.normalizeClass(["layout-btn",{active:w.value===l}]),onClick:h=>j(l),title:((a=e.unref(y)[l])==null?void 0:a.label)||"","aria-label":`切换到${((c=e.unref(y)[l])==null?void 0:c.label)||""}布局`,"aria-pressed":w.value===l,type:"button"},[e.createVNode($,{type:l},null,8,["type"]),e.createElementVNode("span",pe,e.toDisplayString(((s=e.unref(y)[l])==null?void 0:s.label)||""),1)],10,ue)}),128))])])):e.createCommentVNode("",!0),e.createElementVNode("div",ve,[e.createElementVNode("div",{class:"video-grid",style:e.normalizeStyle(z.value)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(S.value,(l,a)=>{var c,s,h;return e.openBlock(),e.createElementBlock("div",{key:((c=x.value[a])==null?void 0:c.id)??a,class:e.normalizeClass(["video-item",{"main-video":U(a),dragging:u.value===a,"drag-over":m.value===a&&u.value!==a}]),style:e.normalizeStyle(H(a)),draggable:!0,"aria-label":`视频 ${a+1}: ${((s=x.value[a])==null?void 0:s.title)||((h=x.value[a])==null?void 0:h.id)||""}`,role:"article",tabindex:"0",onDragstart:n=>q(n,a),onDragover:r[0]||(r[0]=e.withModifiers(()=>{},["prevent"])),onDragenter:n=>X(n,a),onDragleave:n=>Q(n,a),onDrop:n=>W(n,a),onDragend:J},[e.renderSlot(t.$slots,"video",{video:x.value[a],index:a},()=>[e.createElementVNode("div",ke,[e.createElementVNode("div",ge,e.toDisplayString(Y(T.value.indexOf(a))),1)])],!0)],46,ye)}),128))],4)])],4))}}),R=O(Ce,[["__scopeId","data-v-f0958f8e"]]),xe={VideoGridLayout:R,VideoLayoutIcon:$},be={install(i){Object.entries(xe).forEach(([v,o])=>{i.component(v,o)})}};exports.LAYOUT_CONFIGS=y;exports.VideoGridLayout=R;exports.VideoLayoutIcon=$;exports.default=be;exports.getAllLayoutTypes=M;exports.getLayoutPositions=G;
